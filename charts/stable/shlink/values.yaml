image:
  repository: tccr.io/truecharts/shlink
  pullPolicy: IfNotPresent
  tag: 3.5.2@sha256:492d314b0d6fa22411102516ffc10662dee871a1f9d01bdb4f5d6daf9bba802e
service:
  main:
    ports:
      main:
        port: 10153
cnpg:
  main:
    enabled: true

    user: shlink
    database: shlink
redis:
  enabled: true
  existingSecret: "rediscreds"
  redisUsername: "default"
portal:
  open:
    enabled: false
securityContext:
  container:
    runAsNonRoot: false
    readOnlyRootFilesystem: false
    runAsUser: 0
    runAsGroup: 0
workload:
  main:
    podSpec:
      containers:
        main:
          probes:
            liveness:
              path: "/rest/health"
            readiness:
              path: "/rest/health"
            startup:
              path: "/rest/health"
        env:
          DEFAULT_DOMAIN: ""
          GEOLITE_LICENSE_KEY: ""
          ANONYMIZE_REMOTE_ADDR: true
          ENABLE_PERIODIC_VISIT_LOCATE: true
          IS_HTTPS_ENABLED: true
          PORT: "{{ .Values.service.main.ports.main.port }}"
          DB_DRIVER: "postgres"
          DB_USER: "{{ .Values.cnpg.user }}"
          DB_NAME: "{{ .Values.cnpg.database }}"
          DB_PASSWORD:
            secretKeyRef:
              name: cnpg-main-urls
              key: postgresql-password
          DB_HOST:
            secretKeyRef:
              name: cnpg-main-urls
              key: plainhost
          REDIS_SERVERS:
            secretKeyRef:
              name: rediscreds
              key: url
