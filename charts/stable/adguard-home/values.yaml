image:
  repository: tccr.io/truecharts/adguard-home
  tag: 0.107.14@sha256:25de77dee1dca14ecb8842e81da2a8690093142dce673207fbe95cc8eb0b0e6d
  pullPolicy: IfNotPresent

args:
  - --no-check-update
  - -h "0.0.0.0"
  - -c /opt/adguardhome/conf/AdGuardHome.yaml
  - -w /opt/adguardhome/work
  - --port {{ .Values.service.main.ports.main.port }}

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

probes:
  liveness:
    type: HTTP
    path: /
    # custom: true
    # spec:
    #   exec:
    #     command:
    #       - /bin/sh
    #       - -c
    #       - curl -k --silent --fail http://localhost:80 || curl -k --silent http://localhost:3000
  readiness:
    type: HTTP
    path: /
    # custom: true
    # spec:
    #   exec:
    #     command:
    #       - /bin/sh
    #       - -c
    #       - curl -k --silent --fail http://localhost:80 || curl -k --silent http://localhost:3000
  startup:
    type: HTTP
    path: /
    # custom: true
    # spec:
    #   exec:
    #     command:
    #       - /bin/sh
    #       - -c
    #       - curl -k --silent --fail http://localhost:80 || curl -k --silent http://localhost:3000

service:
  main:
    ports:
      main:
        port: 10232
        protocol: HTTP
        targetPort: 3000
  # install-wizard:
  #   enabled: true
  #   ports:
  #     install-wizard:
  #       enabled: true
  #       protocol: HTTP
  #       port: 10233
  #       targetPort: 3000
  dns-tcp:
    enabled: true
    ports:
      dns-tcp:
        enabled: true
        port: 53
        targetPort: 53
  dns-udp:
    enabled: true
    ports:
      dns-udp:
        enabled: true
        protocol: UDP
        port: 53
        targetPort: 53
  dns-https:
    enabled: true
    ports:
      dns-https:
        enabled: true
        protocol: HTTPS
        port: 10234
        targetPort: 443
  dns-https-udp:
    enabled: true
    ports:
      dns-https-udp:
        enabled: true
        protocol: UDP
        port: 10234
        targetPort: 443
  dns-crypt:
    enabled: true
    ports:
      dns-crypt:
        enabled: true
        protocol: HTTP
        port: 5443
        targetPort: 5443
  dns-crypt-udp:
    enabled: true
    ports:
      dns-crypt-udp:
        enabled: true
        protocol: UDP
        port: 5443
        targetPort: 5443
  dns-quic-udp-1:
    enabled: true
    ports:
      dns-quic-udp-1:
        enabled: true
        protocol: UDP
        port: 784
        targetPort: 784
      dns-quic-udp-2:
        enabled: true
        protocol: UDP
        port: 853
        targetPort: 853
      dns-quic-udp-3:
        enabled: true
        protocol: UDP
        port: 8853
        targetPort: 8853

persistence:
  config:
    enabled: true
    mountPath: "/opt/adguardhome/conf"
  data:
    enabled: true
    mountPath: "/opt/adguardhome/work"

portal:
  enabled: true
