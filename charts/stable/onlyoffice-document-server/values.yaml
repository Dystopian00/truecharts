image:
  repository: tccr.io/truecharts/documentserver
  tag: v6.4.2.6@sha256:c298cbb59a2d7f73a5a9bc5cc11f9e0e299ef2ab966e64f3e8d8382921a6341c
  pullPolicy: IfNotPresent

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

secret:
  JWT_SECRET: "randomgeneratedstring"

env:
  WOPI_ENABLED: true
  JWT_ENABLED: true
  DB_TYPE: "postgres"
  DB_PORT: 5432
  DB_NAME: "{{ .Values.postgresql.postgresqlDatabase }}"
  DB_USER: "{{ .Values.postgresql.postgresqlUsername }}"
  REDIS_SERVER_PORT: 6379

envValueFrom:
  DB_HOST:
    secretKeyRef:
      name: dbcreds
      key: plainhost
  DB_PWD:
    secretKeyRef:
      name: dbcreds
      key: postgresql-passwor
  REDIS_SERVER_HOST:
    secretKeyRef:
      name: rediscreds
      key: url

service:
  main:
    ports:
      main:
        port: 10043
        targetPort: 80

# Enabled postgres
postgresql:
  enabled: true
  existingSecret: "dbcreds"
  postgresqlUsername: onlyoffice
  postgresqlDatabase: onlyoffice

# Enabled redis
redis:
  enabled: true
  existingSecret: "rediscreds"
