image:
  repository: pydio/cells
  pullPolicy: IfNotPresent
  tag: 3.0.4@sha256:3aea8ee8f3adb13fedc7d633619b1b69c3f75b79d3f2ea34e5f33755bacfdb1f

# securityContext:
#   runAsNonRoot: false

# podSecurityContext:
#   runAsUser: 0
#   runAsGroup: 0

env:
  CELLS_EXTERNAL: ""
  CELLS_GRPC_EXTERNAL: 33060
  CELLS_HEALTHCHECK: 6565
  CELLS_BINDS: "0.0.0.0:{{ .Values.service.main.ports.main.targetPort }}"
  # http://your-cells:6565/healthcheck/
  # CELLS_ENABLE_METRICS: true
  # prometheus.yml
  # - job_name: "cells"
  #   file_sd_configs:
  #     - files:
  #         - ${CELLS_WORKING_DIR}/services/pydio.gateway.metrics/prom_clients.json
  CELLS_WORKING_DIR: "/cells"
  CELLS_DATA_DIR: "/cells/data"
  CELLS_LOG_DIR: "/cells/logs"
  CELLS_SERVICES_DIR: "/cells/services"
  CELLS_INSTALL_YAML: "/cells/install.yml"

envValueFrom:
  DB_HOST:
    secretKeyRef:
      name: mariadbcreds
      key: plainhost
  DB_PASSWORD:
    secretKeyRef:
      name: mariadbcreds
      key: mariadb-password

pydioinstall:
  username: "admin"
  password: "supersecret"

service:
  main:
    ports:
      main:
        targetPort: 10150
        port: 10150
  gprc:
    enabled: true
    ports:
      gprc:
        enabled: true
        targetPort: 33060
        port: 33060

persistence:
  cells:
    enabled: true
    mountPath: "/cells"
  data:
    enabled: true
    mountPath: "/cells/data"
  logs:
    enabled: true
    mountPath: "/cells/logs"
  services:
    enabled: true
    mountPath: "/cells/services"
  # varrun:
  #   enabled: true

mariadb:
  enabled: true
  mariadbUsername: pydiocells
  mariadbDatabase: pydiocells
  existingSecret: "mariadbcreds"
