image:
  repository: tccr.io/truecharts/grafana
  pullPolicy: IfNotPresent
  tag: v8.3.0@sha256:d0e471cc547dae02bcd7ae1355ad98b280ea11a1b3bd902217662670c4c2d4fe

securityContext:
  readOnlyRootFilesystem: false

service:
  main:
    protocol: HTTP
    ports:
      main:
        targetPort: 3000
        port: 10038

probes:
  liveness:
    path: "/api/health"

  readiness:
    path: "/api/health"

  startup:
    path: "/api/health"

secret:
  GF_SECURITY_ADMIN_PASSWORD: "testpassword"

env:
  GF_SECURITY_ADMIN_USER: "admin"
  GF_INSTALL_PLUGINS: ""
  GF_PATHS_PLUGINS: "/opt/tccr.io/truecharts/grafana/data/plugins"
  GF_AUTH_LDAP_ENABLED: "false"
  GF_AUTH_LDAP_CONFIG_FILE: "/opt/tccr.io/truecharts/grafana/conf/ldap.toml"
  GF_AUTH_LDAP_ALLOW_SIGN_UP: "false"
  GF_PATHS_PROVISIONING: "/opt/tccr.io/truecharts/grafana/conf/provisioning"
  GF_PATHS_CONFIG: "/opt/tccr.io/truecharts/grafana/conf/grafana.ini"
  GF_PATHS_DATA: "/opt/tccr.io/truecharts/grafana/data"
  GF_PATHS_LOGS: "/opt/tccr.io/truecharts/grafana/logs"


persistence:
  config:
    enabled: true
    mountPath: "/opt/tccr.io/truecharts/grafana/data"

metrics:
  # -- Enable and configure a Prometheus serviceMonitor for the chart under this key.
  # @default -- See values.yaml
  enabled: false
  serviceMonitor:
    interval: 1m
    scrapeTimeout: 30s
    labels: {}
  # -- Enable and configure Prometheus Rules for the chart under this key.
  # @default -- See values.yaml
  prometheusRule:
    enabled: false
    labels: {}
    # -- Configure additionial rules for the chart under this key.
    # @default -- See prometheusrules.yaml
    rules: []
      # - alert: UnifiPollerAbsent
      #   annotations:
      #     description: Unifi Poller has disappeared from Prometheus service discovery.
      #     summary: Unifi Poller is down.
      #   expr: |
      #     absent(up{job=~".*unifi-poller.*"} == 1)
      #   for: 5m
      #   labels:
      #     severity: critical
