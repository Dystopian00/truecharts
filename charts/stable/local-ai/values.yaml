image:
  repository: tccr.io/truecharts/local-ai
  pullPolicy: IfNotPresent
  tag: v1.23.0@sha256:06183cc9fffb59c474a98171c479eb234369d502cb4bcefd4c5f56ccc248ce31
ffmpegImage:
  repository: tccr.io/truecharts/local-ai-ffmpeg
  pullPolicy: IfNotPresent
  tag: v1.23.0@sha256:9d9cc49336e898379e54533991ffcc27bac9b328acf7ab4df7651afeee397ecd
cublasCuda12Image:
  repository: tccr.io/truecharts/local-ai-cublas-cuda12
  pullPolicy: IfNotPresent
  tag: v1.23.0-cublas@sha256:5270b7a462c7c3e5178c7eb3ec8ab5c5e24d9d9763ae559e9a050cb881f44890
cublasCuda12FfmpegImage:
  repository: tccr.io/truecharts/local-ai-cublas-cuda12-ffmpeg
  pullPolicy: IfNotPresent
  tag: v1.23.0-cublas-cuda12@sha256:01d4891f1b125829c0e7675e50da97e53555fd1dc8c6cf4777925d2ccd1d481c
cublasCuda11Image:
  repository: tccr.io/truecharts/local-ai-cublas-cuda11
  pullPolicy: IfNotPresent
  tag: v1.23.0-cublas@sha256:776c99a721ec1202b95220eae5806082bf925c813105eb0bf2e24d26b76b3b50
cublasCuda11FfmpegImage:
  repository: tccr.io/truecharts/local-ai-cublas-cuda11-ffmpeg
  pullPolicy: IfNotPresent
  tag: v1.23.0-cublas-cuda11@sha256:573c374e21e3bb32cf45ac08383c357f2e7c5339f3bf15dc6802c7b089c6989d

securityContext:
  container:
    runAsNonRoot: false
    readOnlyRootFilesystem: false
    runAsUser: 0
    runAsGroup: 0

service:
  main:
    ports:
      main:
        protocol: http
        port: 8080

localai:
  # Specify a build type. Available: cublas, openblas, clblas.
  build_type: "openblas"
  rebuild: false
  # requires REBUILD=true | stablediffusion, tts
  # stablediffusion: image generation with stablediffusion
  # tts: enables text-to-speech with go-piper
  go_tags: "stablediffusion"
  context_size: "512"
  debug: true
  cors: true
  cors_allow_origins: "*"
  galleries:
    - name: model-gallery
      url: github:go-skynet/model-gallery/index.yaml
  preload_models:
    - name": gpt-3.5-turbo
      url: github:go-skynet/model-gallery/gpt4all-j.yaml
  # UPLOAD_LIMIT

workload:
  main:
    podSpec:
      containers:
        main:
          probes:
            liveness:
              enabled: true
              type: http
              path: /readyz
            readiness:
              enabled: true
              type: http
              path: /readyz
            startup:
              enabled: true
              type: http
              path: /readyz
          imageSelector: image
          env:
            ADDRESS: ":{{ .Values.service.main.ports.main.port }}"
            MODELS_PATH: "{{ .Values.persistence.models.mountPath }}"
            IMAGE_PATH: "{{ .Values.persistence.images.mountPath }}"
            BUILD_TYPE: "{{ .Values.localai.build_type }}"
            REBUILD: "{{ .Values.localai.rebuild }}"
            GO_TAGS: "{{ .Values.localai.go_tags }}"
            CONTEXT_SIZE: "{{ .Values.localai.context_size }}"
            DEBUG: "{{ .Values.localai.debug }}"
            CORS: "{{ .Values.localai.cors }}"
            GALLERIES: "{{ toJson .Values.localai.galleries }}"
            PRELOAD_MODELS: "{{ toJson .Values.localai.preload_models }}"
            CORS_ALLOW_ORIGINS: "{{ .Values.localai.cors_allow_origins }}"

persistence:
  models:
    enabled: true
    mountPath: "/models"
  images:
    enabled: true
    mountPath: "/images"

portal:
  open:
    enabled: false
