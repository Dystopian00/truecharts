# Include{groups}
questions:
# Include{global}
# Include{controller}
  - variable: metallb
    group: App Configuration
    label: MetalLB Configuration
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: ipAddressPools
          label: IP Address Pools Object
          schema:
            additional_attrs: true
            type: list
            default: []
            items:
              - variable: name
                label: Name
                description: Name of the IP address pool
                schema:
                  type: string
                  required: true
                  default: ""
              - variable: autoAssign
                label: Auto Assign
                description: AutoAssign flag used to prevent MetallB from automatic
                    allocation for a pool.
                schema:
                  type: boolean
                  default: true
              - variable: avoidBuggyIPs
                label: Avoid Buggy IPs
                description: AvoidBuggyIPs prevents addresses ending with .0 and .255
                    to be used by a pool.
                schema:
                  type: boolean
                  default: false
              - variable: addresses
                label: Addresses Pools
                description: A list of IP address ranges over which MetalLB has authority.
                    You can list multiple ranges in a single pool, they will all share
                    the same settings. Each range can be either a CIDR prefix, or an
                    explicit start-end range of IPs.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: addressPoolEntry
                      label: Address Pool Entry
                      schema:
                        type: string
                        default: ""
                        required: true
        - variable: L2Advertisements
          label: L2 Advertisements
          description: L2Advertisement allows to advertise the LoadBalancer IPs provided
              by the selected pools via L2.
          schema:
            additional_attrs: true
            type: list
            default: []
            items:
              - variable: name
                label: Name
                description: Name of the L2 Advertisement
                schema:
                  type: string
                  required: true
                  default: ""
              - variable: addressPools
                label: Address Pools
                description: The list of IPAddressPools to advertise via this advertisement,
                    selected by name.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: addressPoolEntry
                      label: Address Pool Entry
                      schema:
                        type: string
                        default: ""
                        required: true
              - variable: nodeSelectors
                label: Node Selectors
                description: NodeSelectors allows to limit the nodes to announce as
                    next hops for the LoadBalancer IP. When empty, all the nodes having  are
                    announced as next hops.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: nodeSelectorEntry
                      label: Node Selector Entry
                      schema:
                        type: string
                        default: ""
                        required: true
        - variable: Communities
          label: Communities
          description: Community is a collection of aliases for communities. Users can
            define named aliases to be used in the BGPPeer CRD.
          schema:
            additional_attrs: true
            type: list
            default: []
            items:
              - variable: name
                label: Name
                description: The name of the alias for the community.
                schema:
                  type: string
                  required: true
                  default: ""
              - variable: value
                label: Value
                description: The BGP community value corresponding to the given name.
                schema:
                  type: string
                  required: true
                  default: ""
        - variable: BGPAdvertisements
          label: BGP Advertisements
          description: BGPAdvertisement allows to advertise the IPs coming from the
            selected IPAddressPools via BGP.
          schema:
            additional_attrs: true
            type: list
            default: []
            items:
              - variable: name
                label: Name
                description: Name of the BGP Advertisement
                schema:
                  type: string
                  required: true
                  default: ""
              - variable: addressPools
                label: Address Pools
                description: The list of IPAddressPools to advertise via this advertisement,
                    selected by name.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: addressPoolEntry
                      label: Address Pool Entry
                      schema:
                        type: string
                        default: ""
                        required: true
              - variable: setAggLen
                label: Set Aggregation Length
                description: Allows you to set aggregation length
                schema:
                  type: boolean
                  required:
                  default: false
                  show_subquestions_if: true
                  subquestions:
                    - variable: aggregationLength
                      label: Aggregation Length
                      description: The aggregation-length advertisement option lets you
                        "roll up" the /32s into a larger prefix. Defaults to 32. Works for
                        IPv4 addresses.
                      schema:
                        type: int
                        default: 24
              - variable: setLocalPref
                label: Set Local Pref
                description: Allows you to set local pref
                schema:
                  type: boolean
                  required:
                  default: false
                  show_subquestions_if: true
                  subquestions:
                    - variable: localpref
                      label: Local Pref
                      description: The BGP LOCAL_PREF attribute which is used by BGP best
                        path algorithm, Path with higher localpref is preferred over one
                        with lower localpref.
                      schema:
                        type: int
                        default: 100
              - variable: communities
                label: Communities
                description: The BGP communities to be associated with the announcement.
                    Each item can be a community of the form 1234:1234 or the name of
                    an alias defined in the Community CRD.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: communityEntry
                      label: Community Entry
                      schema:
                        type: string
                        default: ""
                        required: true
              - variable: peers
                label: Peers
                description: Peers limits the BGPpeer to advertise the ips of the
                    selected pools to. When empty, the loadbalancer IP is announced
                    to all the BGPPeers configured.
                schema:
                  type: list
                  default: []
                  items:
                    - variable: peerEntry
                      label: Peer Entry
                      schema:
                        type: string
                        default: ""
                        required: true
