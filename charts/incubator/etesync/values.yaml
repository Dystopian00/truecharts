image:
  repository: victorrds/etesync
  pullPolicy: IfNotPresent
  tag: 0.9.1@sha256:a880ed256dd78f14fb8dc9ab2e72ca2acebd3b8a87db65ea038f30abed27d896

podSecurityContext:
  runAsUser: 373
  runAsGroup: 373
  fsGroup: 373

etesync:
  DEBUG: false
  SHELL_DEBUG: false
  SUPER_USER: "admin"
  SUPER_PASS: ""
  SUPER_EMAIL: ""

# Docker image configuration docs:
# https://github.com/victor-rds/docker-etebase#settings-and-customization

# EteSync configuration docs:
# https://github.com/etesync/server#configuration

env:
  SERVER: http
  DEBUG: "{{ .Values.etesync.DEBUG }}"
  SHELL_DEBUG: "{{ .Values.etesync.SHELL_DEBUG }}"
  AUTO_UPDATE: true
  SUPER_USER: "{{ .Values.etesync.SUPER_USER }}"
  SUPER_PASS: "{{ .Values.etesync.SUPER_PASS }}"
  SUPER_EMAIL: "{{ .Values.etesync.SUPER_EMAIL }}"
  DB_ENGINE: postgres
  DATABASE_NAME: "{{ .Values.postgresql.postgresqlDatabase }}"
  DATABASE_USER: "{{ .Values.postgresql.postgresqlUsername }}"
  DATABASE_PASSWORD:
    secretKeyRef:
      name: dbcreds
      key: postgresql-password
  DATABASE_HOST:
    secretKeyRef:
      name: dbcreds
      key: plainhost
  DATABASE_PORT: 5432
  TIME_ZONE: "{{ .Values.TZ }}"

service:
  main:
    protocol: HTTP
    ports:
      main:
        targetPort: 3735
        port: 10253

persistence:
  app:
    enabled: true
    mountPath: "/data"

probes:
  liveness:
    path: "/"
  readiness:
    path: "/"
  startup:
    path: "/"

postgresql:
  enabled: true
  existingSecret: "dbcreds"
  postgresqlUsername: etesync
  postgresqlDatabase: etesync
