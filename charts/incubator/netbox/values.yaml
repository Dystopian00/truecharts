image:
  repository: tccr.io/truecharts/netbox
  tag: 3.3.6@sha256:4084b61c588dd2f15d117f30017a5c15fd03c3de38ed49e3241c48bce54048d7
  pullPolicy: IfNotPresent

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

# https://github.com/netbox-community/netbox/pull/10825
# probes:
#   liveness:
#     type: HTTP
#     path: /healthcheck
#   readiness:
#     type: HTTP
#     path: /healthcheck
#   startup:
#     type: HTTP
#     path: /healthcheck

service:
  main:
    ports:
      main:
        port: 10265
        protocol: HTTP
        targetPort: 8080

netbox:
  # - This is a list of valid fully-qualified domain names (FQDNs) for the NetBox server. NetBox will not permit write
  # - access to the server via any other hostnames. The first FQDN in the list will be treated as the preferred name.
  allowed_hosts:
    - "127.0.0.1"
  # - Specify one or more name and email address tuples representing NetBox administrators. These people will be notified of
  # - application errors (assuming correct email settings are provided).
  admins: []
    # - name: John Doe
    #   email: jdoe@example.com
  # - Enable any desired validators for local account passwords below. For a list of included validators, please see the
  # - Django documentation at https://docs.djangoproject.com/en/stable/topics/auth/passwords/#password-validation.
  auth_password_validators: []
    # - name: django.contrib.auth.password_validation.MinimumLengthValidator
    #   options:
    #     - key: min_length
    #       value: 10
  # - API Cross-Origin Resource Sharing (CORS) settings. If CORS_ORIGIN_ALLOW_ALL is set to True, all origins will be
  # - allowed. Otherwise, define a list of allowed origins using either CORS_ORIGIN_WHITELIST or
  # - CORS_ORIGIN_REGEX_WHITELIST. For more information, see https://github.com/ottoyiu/django-cors-headers
  cors_origin_allow_all: false
  cors_origin_whitelist: []
    # - "127.0.0.1"
  cors_origin_regex_whitelist: []
    # - r'^(https?://)?(\w+\.)?example\.com$'
  debug: false
  email:
    server: ""
    port: 587
    username: ""
    password: ""
    use_ssl: false
    use_tls: true
    timeout: 10
    from_email: ""
  # - Exempt certain models from the enforcement of view permissions. Models listed here will be viewable by all users and
  # - by anonymous users. List models in the form `<app>.<model>`. Add '*' to this list to exempt all models.
  exempt_view_permissions: []
    # - dcim.site
    # - dcim.region
    # - ipam.prefix
  # - HTTP proxies NetBox should use when sending outbound HTTP requests (e.g. for webhooks).
  http_proxies: []
    # - key: http
    #   url: http://10.10.1.10:3128
    # - key: https
    #   url: http://10.10.1.10:1080
  # - IP addresses recognized as internal to the system. The debugging toolbar will be available only to clients accessing
  # - NetBox from an internal IP.
  internal_ips:
    - "127.0.0.1"
    - ::1
  # - Enable custom logging. Please see the Django documentation for detailed guidance on configuring custom logs:
  # - https://docs.djangoproject.com/en/stable/topics/logging/
  # TODO:
  logging: {}
  # - Automatically reset the lifetime of a valid session upon each authenticated request. Enables users to remain
  # - authenticated to NetBox indefinitely.
  login_persistence: false
  # - Setting this to True will permit only authenticated users to access any part of NetBox. By default, anonymous users
  # - are permitted to access most data in NetBox but not make any changes.
  login_required: true
  # - The length of time (in seconds) for which a user will remain logged into the web UI before being prompted to
  # - re-authenticate. (Default: 1209600 [14 days])
  login_timeout: 1209600
  # - Expose Prometheus monitoring metrics at the HTTP endpoint '/metrics'
  metrics: false
  # - By default uploaded media is stored on the local filesystem. Using Django-storages is also supported. Provide the
  # - class path of the storage driver in storage_backend and any configuration options in storage_config. For example:
  storage_backend: ""
  # storage_backend: storages.backends.s3boto3.S3Boto3Storage
  storage_config: []
    # - key: AWS_ACCESS_KEY_ID
    #   value: KeyID
    # - key: AWS_SECRET_ACCESS_KEY
    #   value: Secret
    # - key: AWS_STORAGE_BUCKET_NAME
    #   value: netbox
    # - key: AWS_S3_REGION_NAME
    #   value: eu-west-1
  # - Enable installed plugins. Add the name of each plugin to the list.
  plugins: []
    # - plugin1
    # - plugin2
  # - Plugins configuration settings. These settings are used by various plugins that the user may have installed.
  plugin_config: []
    # - plugin_name: plugin1
    #   config:
    #     - key: foo
    #       value: bar
    #     - key: fizz
    #       value: bizz
  # - Maximum execution time for background tasks, in seconds.
  rq_default_timeout: 300
  # - The name to use for the session cookie.
  session_cookie_name: sessionid
  # - The name to use for the csrf token cookie.
  csrf_cookie_name: csrftoken
  # - Remote authentication support
  remote_auth: {}
    # enabled: false
    # backend: netbox.authentication.RemoteUserBackend
    # header: header
    # auto_create_user: false
    # default_groups: []
    # default_permissions:
    #   - key: dcim.change_site
    #     value: None
  # - Date/time formatting. See the following link for supported formats:
  # - https://docs.djangoproject.com/en/stable/ref/templates/builtins/#date
  date_time:
    date_format: N j, Y
    short_date_format: Y-m-d
    time_format: g:i a
    short_time_format: H:i:s
    date_time_format: N j, Y g:i a
    short_date_time_format: Y-m-d H:i

persistence:
  config:
    enabled: true
    mountPath: /etc/netbox/config
  reports:
    enabled: true
    mountPath: /etc/netbox/reports
  scripts:
    enabled: true
    mountPath: /etc/netbox/scripts
  media:
    enabled: true
    mountPath: /opt/netbox/netbox/media
  configfile:
    enabled: true
    type: secret
    objectName: '{{ include "tc.common.names.fullname" . }}-secret'
    mountPath: /etc/netbox/config/config.py
    subPath: 01-config.py

postgresql:
  enabled: true
  existingSecret: dbcreds
  postgresqlUsername: netbox
  postgresqlDatabase: netbox

redis:
  enabled: true
  existingSecret: rediscreds

portal:
  enabled: true
