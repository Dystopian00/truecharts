image:
  repository: docker.io/mongo-express
  pullPolicy: IfNotPresent
  tag: latest@sha256:d5cee110909938c99cf8800b9379494c190d8fecaec70a4ce3886facdee6ef8e
service:
  main:
    ports:
      main:
        protocol: http
        targetPort: 8081
        port: 18081
portal:
  open:
    enabled: true
securityContext:
  container:
    readOnlyRootFilesystem: false
workload:
  main:
    podSpec:
      containers:
        main:
          env:
            ME_CONFIG_MONGODB_AUTH_DATABASE: "{{ .Values.mongodb.mongodbDatabase }}"
            ME_CONFIG_MONGODB_AUTH_USERNAME: "{{ .Values.mongodb.mongodbUsername }}"
            ME_CONFIG_MONGODB_AUTH_PASSWORD:
              secretKeyRef:
                expandObjectName: "{{ if .Values.mongodb.mongodbRootPassword }}true{{ else }}false{{ end }}"
                name: '{{ if .Values.mongodb.mongodbRootPassword }}credentials{{ else if .Values.mongodb.existingSecret }}{{ .Values.mongodb.existingSecret }}{{ else }}{{ printf "%s-%s" .Release.Name "mongodbcreds" }}{{ end }}'
mongodb:
  enabled: true
  mongodbUsername: mongo-express
  mongodbDatabase: mongo-express
  mongodbRootPassword: ""
  existingSecret: ""
secret:
  credentials:
    enabled: true
    data:
      mongodb-root-password: '{{ ( .Values.mongodb.mongoRootPassword | default "empty" ) }}'

