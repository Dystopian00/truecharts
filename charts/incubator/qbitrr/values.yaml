image:
  repository: feramance/qbitrr
  pullPolicy: IfNotPresent
  tag: v3.7.1@sha256:64899117f9c4e8de760905eb48f82465f996acc398bb64b22511e4e83686da9c
securityContext:
  container:
    readOnlyRootFilesystem: false
    runAsNonRoot: false

service:
  main:
    enabled: false
    ports:
      main:
        enabled: false

workload:
  main:
    podSpec:
      initContainers:
        create-init-config-file:
          enabled: true
          type: init
          imageSelector: "image"
          command:
            - /bin/sh
            - -c
          args:
            - |
              echo "Creating config.toml file..."
              if [ -f /config/config.toml ]; then
                echo "Config file exists! Skipping..."
              else
                echo "Config file is missing, getting a new one!"
                curl -fLvo /config/config.toml https://raw.githubusercontent.com/Feramance/qBitrr/master/config.example.toml || (echo "Downloading config file, FAILED..." && exit 1)
              fi
      containers:
        main:
          probes:
            liveness:
              enabled: false
            readiness:
              enabled: false
            startup:
              enabled: false

persistence:
  config:
    enabled: true
    mountPath: /config
  downloads:
    enabled: true
    mountPath: /completed_downloads

portal:
  open:
    enabled: false

