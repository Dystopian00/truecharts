image:
  repository: tccr.io/truecharts/meshcentral
  pullPolicy: IfNotPresent
  tag: latest@sha256:1c28727b9d2e1d4288c05bfc50a3b789dd293e2b83f44068a504b36e3b0de558

command: ["cat /opt/meshcentral/meshcentral-data/config.json"]

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

mesh:
  settings_cert: "my.domain.com"
  settings_webRTC: false
  settings_plugins_enabled: false
  settings_allowFraming: false
  settings_domains_minify: true
  settings_domains_localSessionRecording: false
  settings_domains_newAccounts: true
  settings_domains_certUrl: ""
  settings_domains_title: "MyServer"
  settings_domains_title2: "Server Name"

service:
  main:
    ports:
      main:
        protocol: "HTTPS"
        port: 10205

initContainers:
  init:
    image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
    command: ["/init/meshcentral/init.sh"]
    volumeMounts:
      - name: init
        mountPath: "/init/meshcentral"
      - name: data
        mountPath: "/opt/meshcentral/meshcentral-data"

mongodb:
  enabled: true
  mongodbUsername: meshcentral
  mongodbDatabase: meshcentral
  existingSecret: "mongodbcreds"

persistence:
  data:
    enabled: true
    mountPath: "/opt/meshcentral/meshcentral-data"
  user:
    enabled: true
    mountPath: "/opt/meshcentral/meshcentral-files"
  init:
    enabled: "true"
    mountPath: "/init/meshcentral"
