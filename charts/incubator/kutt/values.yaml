image:
  repository: kutt/kutt
  pullPolicy: IfNotPresent
  tag: v2.7.4@sha256:2fa9480755229bd9a14ea03fb2129eb80412600f3c5dabc8f9f9fbf35ff88fce

# securityContext:
#   readOnlyRootFilesystem: false
#   runAsNonRoot: false

# podSecurityContext:
#   runAsUser: 0
#   runAsGroup: 0

secret:
  RECAPTCHA_:

env:
  PORT: "{{ .Values.service.main.ports.main.port }}"
  DB_NAME: kutt
  DB_USER: kutt
  DB_PORT: "5432"
  REDIS_PORT: "6379"
  # User Defined
  SITE_NAME: "My Kutt Instance"
  DEFAULT_DOMAIN: "localhost:{{ .Values.service.main.ports.main.port }}"
  LINK_LENGTH: 6

envValueFrom:
  DB_HOST:
    secretKeyRef:
      name: dbcreds
      key: plainhost
  DB_PASSWORD:
    secretKeyRef:
      name: dbcreds
      key: postgresql-password
  REDIS_HOST:
    secretKeyRef:
      name: rediscreds
      key: plainhost
  REDIS_PASSWORD:
    secretKeyRef:
      name: rediscreds
      key: password
  JWT_SECRET:
    secretKeyRef:
      name: kutt-secrets
      key: JWT_SECRET

service:
  main:
    ports:
      main:
        port: 10195

# Enabled redis
redis:
  enabled: true
  existingSecret: "rediscreds"

# Enabled postgres
postgresql:
  enabled: true
  existingSecret: "dbcreds"
  postgresqlUsername: kutt
  postgresqlDatabase: kutt
