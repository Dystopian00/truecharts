image:
  repository: tailscale/tailscale
  pullPolicy: IfNotPresent
  tag: v1.29.125@sha256:5bfeda9594bfbc8ad5f7fbb0fb4827ed8066bd07af0fc3435e44e0494552447c

command: ["ash", "/tailscale/run.sh"]

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false
  capabilities:
    add:
      - NET_ADMIN
      - SYS_MODULE

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

serviceAccount:
  main:
    create: true

rbac:
  main:
    enabled: true
    rules:
      - apiGroups:
          - ""
        resources:
          - "secrets"
        verbs:
          - "create"
      - apiGroups:
          - ""
        resources:
          - "secrets"
        resourceNames:
          - '{{ printf "%s-tailscale-secret" (include "tc.common.names.fullname" .) }}'
        verbs:
          - "get"
          - "update"

env:
  TS_KUBE_SECRET: '{{ printf "%s-tailscale-secret" (include "tc.common.names.fullname" .) }}'

tailscale:
  authkey: "secret"

service:
  main:
    ports:
      main:
        protocol: UDP
        port: 41641

persistence:
  temp:
    enabled: false
  config:
    enabled: true
    mountPath: "/var/lib/tailscale"
  tun:
    enabled: true
    type: hostPath
    hostPath: /dev/net/tun
    mountPath: /dev/net/tun
    hostPathType: ""
    readOnly: false

portal:
  enabled: false
