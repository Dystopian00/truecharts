image:
  repository: tccr.io/truecharts/crowdsec
  tag: v1.4.1@sha256:cd7b6cd8e4774cdafb3862961f607de6fc513ea87d5b7a039a0a06bc3a5a97ed
  pullPolicy: IfNotPresent

envFrom:
  - secretRef:
      name: '{{ include "tc.common.names.fullname" . }}-credentials-secret'
  - configMapRef:
      name: '{{ include "tc.common.names.fullname" . }}-agent-config'

crowdsec:
  # docker | containerd
  container_runtime: docker
  local_apI_url: http://localhost:8080
  disable_local_api: true
  credentials:
    username: username
    password: password
  acquisition:
    pods:
      - name: truenas
        namespace: ""
        program: nginx
      - name: native
        namespace: test-native
        program: traefik
    raw_log_paths:
      - path: /path1
        program: nginx
      - path: /path2
        type: test-type
        program: test-app

persistence:
  acquis-config:
    enabled: true
    readOnly: true
    type: custom
    mountPath: /etc/crowdsec
    volumeSpec:
      configMap:
        name: '{{ include "tc.common.names.fullname" . }}-acquis-config'
        items:
          - key: acquis.yaml
            path: acquis.yaml

# securityContext:
#   readOnlyRootFilesystem: false
#   runAsNonRoot: false

# podSecurityContext:
#   runAsUser: 0
#   runAsGroup: 0

# service:
#   main:
#     ports:
#       main:
#         port: 10122
#         targetPort: 4040

# persistence:
#   config:
#     enabled: true
#     mountPath: "/airsonic"

# portal:
#   enabled: true
