image:
  repository: tccr.io/truecharts/watcharr
  pullPolicy: IfNotPresent
  tag: v1.16.0@sha256:bfd121ce8ba69b9eebfcb13d1a2adad392bd0d1adca7bbca6b31c2b295d9862e

securityContext:
  container:
    readOnlyRootFilesystem: false
    runAsNonRoot: false
    runAsUser: 0
    runAsGroup: 0

service:
  main:
    ports:
      main:
        protocol: http
        targetPort: 3080
        port: 10684

watcharr:
  mode: prod
  jellyfin_host: ""
  signup_enabled: true
  tmdb_key: ""
  debug: false

workload:
  main:
    podSpec:
      containers:
        main:
          env:
            JELLYFIN_HOST: "{{ .Values.watcharr.jellyfin_host }}"
            SIGNUP_ENABLED: "{{ .Values.watcharr.signup_enabled }}"
            TMDB_KEY: "{{ .Values.watcharr.tmdb_key }}"
            DEBUG: "{{ .Values.watcharr.debug }}"
            MODE: "{{ .Values.watcharr.mode }}"
            JWT_SECRET:
              secretKeyRef:
                name: watcharr-secrets
                key: JWT_SECRET

persistence:
  data:
    enabled: true
    mountPath: "/data"
  watcharr-env:
    enabled: true
    type: configmap
    objectName: watcharr-env
    targetSelector:
      main:
        main:
          mountPath: /.env
          subPath: .env
          readOnly: true

portal:
  open:
    enabled: true
