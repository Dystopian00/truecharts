image:
  repository: wangqiru/ttrss
  pullPolicy: IfNotPresent
  tag: latest@sha256:3cfb6596ba60eded1078f7888b85defef32d3143da123227578671c4a4cde760

mercuryParserimage:
  repository: wangqiru/mercury-parser-api
  tag: latest@sha256:e150c1d477c008012ed4a74cddf12571475dbf7080c6b0012e8e49d9eaba5e5f

openccimage:
  repository: wangqiru/opencc-api-server
  tag: latest@sha256:df6c992935d0afee2ed1226ddf82079c19f6ee77cd8332ec82721a6d62aad97e

securityContext:
  readOnlyRootFilesystem: false
  runAsNonRoot: false

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0

persistence:
  config:
    enabled: true
    mountPath: "/config"

env:
  TTRSS_SELF_URL_PATH: ""
  TTRSS_DB_NAME: "{{ .Values.postgresql.postgresqlDatabase }}"
  TTRSS_DB_USER: "{{ .Values.postgresql.postgresqlUsername }}"
  TTRSS_DB_PORT: "5432"

envValueFrom:
  TTRSS_DB_PASS:
    secretKeyRef:
      name: dbcreds
      key: postgresql-password
  TTRSS_DB_HOST:
    secretKeyRef:
      name: dbcreds
      key: plainhost

service:
  main:
    ports:
      main:
        port: 10192
        targetPort: 80

postgresql:
  enabled: true
  existingSecret: "dbcreds"
  postgresqlUsername: tt-rss
  postgresqlDatabase: tt-rss

additionalContainers:
  mercuryParser:
    name: mercury-parser-api
    image: "{{ .Values.mercuryParserimage.repository }}:{{ .Values.mercuryParserimage.tag }}"
    ports:
      - containerPort: 3000
        name: main
  opencc:
    name: opencc-api-server
    image: "{{ .Values.openccimage.repository }}:{{ .Values.openccimage.tag }}"
    ports:
      - containerPort: 3000
        name: main
