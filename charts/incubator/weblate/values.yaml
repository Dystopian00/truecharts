image:
  repository: weblate/weblate
  tag: 4.10.1-1@sha256:9004b8512ac8b056232f5c7368818ed336d7b266a91be0c7ce783ad31a2029ef
  pullPolicy: IfNotPresent

securityContext:
  readOnlyRootFilesystem: false

podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

secret:
  WEBLATE_ADMIN_EMAIL: "admin@example.com"
  WEBLATE_ADMIN_NAME: "admin"
  # This sets the password on EVERY app startup
  WEBLATE_ADMIN_PASSWORD: "supersecretpassword"

env:
  TZ: UTC
  POSTGRES_USER: "{{ .Values.postgresql.postgresqlUsername }}"
  POSTGRES_DATABASE: "{{ .Values.postgresql.postgresqlDatabase }}"
  POSTGRES_PORT: 5432
  REDIS_PORT: 6379
  REDIS_DB: "0"


  # plain, compressed, none
  DATABASE_BACKUP: "plain"
  WEBLATE_TIME_ZONE: "{{ .Values.env.TZ }}"
  WEBLATE_DEBUG: false
  # WEBLATE_LOGLEVEL: ""
  WEBLATE_SITE_TITLE: "My Project's Weblate"
  WEBLATE_SITE_DOMAIN: "weblate.example.com"
  # WEBLATE_SERVER_EMAIL: "weblate@example.com"
  # WEBLATE_DEFAULT_FROM_EMAIL: "weblate@example.com"
  # WEBLATE_CONTACT_FORM: "reply-to"
  # WEBLATE_ALLOWED_HOSTS: "*"
  # WEBLATE_REGISTRATION_OPEN: false
  # WEBLATE_REGISTRATION_ALLOW_BACKENDS: ""
  # Enable this when ingress is enabled
  # WEBLATE_ENABLE_HTTPS: false
  # WEBLATE_IP_PROXY_HEADER: "HTTP_X_FORWARDED_FOR"
  # WEBLATE_SECURE_PROXY_SSL_HEADER: "HTTP_X_FORWARDED_PROTO,https"

weblate:
  general: {}
    # WEBLATE_ADMIN_NAME: ""
    # WEBLATE_ADMIN_EMAIL: ""
    # WEBLATE_ADMIN_PASSWORD: ""
    # WEBLATE_SERVER_EMAIL: ""
    # WEBLATE_SITE_TITLE: ""
    # WEBLATE_SITE_DOMAIN: ""
    # WEBLATE_DATABASE_BACKUP: ""
    # WEBLATE_DEBUG: ""
    # WEBLATE_LOGLEVEL: ""
    # WEBLATE_DEFAULT_FROM_EMAIL: ""
    # WEBLATE_CONTACT_FORM: ""
    # WEBLATE_ALLOWED_HOSTS: ""
    # WEBLATE_REGISTRATION_OPEN: ""
    # WEBLATE_REGISTRATION_ALLOW_BACKENDS: ""
    # WEBLATE_TIME_ZONE: ""
    # WEBLATE_ENABLE_HTTPS: ""
    # WEBLATE_IP_PROXY_HEADER: ""
    # WEBLATE_SECURE_PROXY_SSL_HEADER: ""
    # WEBLATE_REQUIRE_LOGIN: ""
    # WEBLATE_LOGIN_REQUIRED_URLS_EXCEPTIONS: ""
    # WEBLATE_ADD_LOGIN_REQUIRED_URLS_EXCEPTIONS: ""
    # WEBLATE_REMOVE_LOGIN_REQUIRED_URLS_EXCEPTIONS: ""
    # WEBLATE_GOOGLE_ANALYTICS_ID: ""
    # WEBLATE_GITHUB_USERNAME: ""
    # WEBLATE_GITHUB_TOKEN: ""
    # WEBLATE_GITLAB_USERNAME: ""
    # WEBLATE_GITLAB_TOKEN: ""
    # WEBLATE_PAGURE_USERNAME: ""
    # WEBLATE_PAGURE_TOKEN: ""
    # WEBLATE_SIMPLIFY_LANGUAGES: ""
    # WEBLATE_DEFAULT_ACCESS_CONTROL: ""
    # WEBLATE_DEFAULT_RESTRICTED_COMPONENT: ""
    # WEBLATE_DEFAULT_TRANSLATION_PROPAGATION: ""
    # WEBLATE_DEFAULT_COMMITER_EMAIL: ""
    # WEBLATE_DEFAULT_COMMITER_NAME: ""
    # WEBLATE_DEFAULT_SHARED_TM: ""
    # WEBLATE_AKISMET_API_KEY: ""
    # WEBLATE_GPG_IDENTITY: ""
    # WEBLATE_URL_PREFIX: ""
    # WEBLATE_SILENCED_SYSTEM_CHECKS: ""
    # WEBLATE_CSP_SCRIPT_SRC: ""
    # WEBLATE_CSP_IMG_SRC: ""
    # WEBLATE_CSP_CONNECT_SRC: ""
    # WEBLATE_CSP_STYLE_SRC: ""
    # WEBLATE_CSP_FONT_SRC: ""
    # WEBLATE_LICENSE_FILTER: ""
    # WEBLATE_LICENSE_REQUIRED: ""
    # WEBLATE_WEBSITE_REQUIRED: ""
    # WEBLATE_HIDE_VERSION: ""
    # WEBLATE_BASIC_LANGUAGES: ""
    # WEBLATE_DEFAULT_AUTO_WATCH: ""
    # WEBLATE_RATELIMIT_ATTEMPTS: ""
    # WEBLATE_RATELIMIT_LOCKOUT: ""
    # WEBLATE_RATELIMIT_WINDOW: ""
    # WEBLATE_ENABLE_AVATARS: ""
    # WEBLATE_LIMIT_TRANSLATION_LENGTH_BY_SOURCE_LENGTH: ""
    # WEBLATE_SSH_EXTRA_ARGS: ""
    # WEBLATE_BORG_EXTRA_ARGS: ""
  machinetranslate: {}
    # WEBLATE_MT_APERTIUM_APY: ""
    # WEBLATE_MT_AWS_REGION: ""
    # WEBLATE_MT_AWS_ACCESS_KEY_ID: ""
    # WEBLATE_MT_AWS_SECRET_ACCESS_KEY: ""
    # WEBLATE_MT_DEEPL_KEY: ""
    # WEBLATE_MT_DEEPL_API_URL: ""
    # WEBLATE_MT_LIBRETRANSLATE_KEY: ""
    # WEBLATE_MT_LIBRETRANSLATE_API_URL: ""
    # WEBLATE_MT_GOOGLE_KEY: ""
    # WEBLATE_MT_GOOGLE_CREDENTIALS: ""
    # WEBLATE_MT_GOOGLE_PROJECT: ""
    # WEBLATE_MT_GOOGLE_LOCATION: ""
    # WEBLATE_MT_MICROSOFT_COGNITIVE_KEY: ""
    # WEBLATE_MT_MICROSOFT_ENDPOINT_URL: ""
    # WEBLATE_MT_MICROSOFT_REGION: ""
    # WEBLATE_MT_MICROSOFT_BASE_URL: ""
    # WEBLATE_MT_MODERNMT_KEY: ""
    # WEBLATE_MT_MYMEMORY_ENABLED: ""
    # WEBLATE_MT_GLOSBE_ENABLED: ""
    # WEBLATE_MT_MICROSOFT_TERMINOLOGY_ENABLED: ""
    # WEBLATE_MT_SAP_BASE_URL: ""
    # WEBLATE_MT_SAP_SANDBOX_APIKEY: ""
    # WEBLATE_MT_SAP_USERNAME: ""
    # WEBLATE_MT_SAP_PASSWORD: ""
    # WEBLATE_MT_SAP_USE_MT: ""
  auth:
    ldap: {}
      # WEBLATE_AUTH_LDAP_SERVER_URI: ""
      # WEBLATE_AUTH_LDAP_USER_DN_TEMPLATE: ""
      # WEBLATE_AUTH_LDAP_USER_ATTR_MAP: ""
      # WEBLATE_AUTH_LDAP_BIND_DN: ""
      # WEBLATE_AUTH_LDAP_BIND_PASSWORD: ""
      # WEBLATE_AUTH_LDAP_CONNECTION_OPTION_REFERRALS: ""
      # WEBLATE_AUTH_LDAP_USER_SEARCH: ""
      # WEBLATE_AUTH_LDAP_USER_SEARCH_FILTER: ""
      # WEBLATE_AUTH_LDAP_USER_SEARCH_UNION: ""
      # WEBLATE_AUTH_LDAP_USER_SEARCH_UNION_DELIMITER: ""
    github: {}
      # WEBLATE_SOCIAL_AUTH_GITHUB_KEY: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_ORG_KEY: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_ORG_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_ORG_NAME: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_TEAM_KEY: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_TEAM_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_GITHUB_TEAM_ID: ""
    bitbucket: {}
      # WEBLATE_SOCIAL_AUTH_BITBUCKET_KEY: ""
      # WEBLATE_SOCIAL_AUTH_BITBUCKET_SECRET: ""
    facebook: {}
      # WEBLATE_SOCIAL_AUTH_FACEBOOK_KEY: ""
      # WEBLATE_SOCIAL_AUTH_FACEBOOK_SECRET: ""
    google: {}
      # WEBLATE_SOCIAL_AUTH_GOOGLE_OAUTH2_KEY: ""
      # WEBLATE_SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS: ""
      # WEBLATE_SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_EMAILS: ""
    gitlab: {}
      # WEBLATE_SOCIAL_AUTH_GITLAB_KEY: ""
      # WEBLATE_SOCIAL_AUTH_GITLAB_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_GITLAB_API_URL: ""
    azure: {}
      # WEBLATE_SOCIAL_AUTH_AZUREAD_OAUTH2_KEY: ""
      # WEBLATE_SOCIAL_AUTH_AZUREAD_OAUTH2_SECRET: ""
    azuretenant: {}
      # WEBLATE_SOCIAL_AUTH_AZUREAD_TENANT_OAUTH2_KEY: ""
      # WEBLATE_SOCIAL_AUTH_AZUREAD_TENANT_OAUTH2_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_AZUREAD_TENANT_OAUTH2_TENANT_ID: ""
    keycloak: {}
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_KEY: ""
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_SECRET: ""
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_PUBLIC_KEY: ""
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_ALGORITHM: ""
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_AUTHORIZATION_URL: ""
      # WEBLATE_SOCIAL_AUTH_KEYCLOAK_ACCESS_TOKEN_URL: ""
    linux: {}
      # WEBLATE_SOCIAL_AUTH_FEDORA: ""
      # WEBLATE_SOCIAL_AUTH_OPENSUSE: ""
      # WEBLATE_SOCIAL_AUTH_UBUNTU: ""
    slack: {}
      # WEBLATE_SOCIAL_AUTH_SLACK_KEY: ""
      # SOCIAL_AUTH_SLACK_SECRET: ""
    saml: {}
      # WEBLATE_SAML_IDP_ENTITY_ID: ""
      # WEBLATE_SAML_IDP_URL: ""
      # WEBLATE_SAML_IDP_X509CERT: ""
    other: {}
      # WEBLATE_NO_EMAIL_AUTH: ""
  email: {}
    # WEBLATE_EMAIL_PORT: ""
    # WEBLATE_EMAIL_HOST: ""
    # WEBLATE_EMAIL_HOST_USER: ""
    # WEBLATE_EMAIL_HOST_PASSWORD: ""
    # WEBLATE_EMAIL_USE_SSL: ""
    # WEBLATE_EMAIL_USE_TLS: ""
    # WEBLATE_EMAIL_BACKEND: ""
    # WEBLATE_AUTO_UPDATE: ""
  siteintegration: {}
    # WEBLATE_GET_HELP_URL: ""
    # WEBLATE_STATUS_URL: ""
    # WEBLATE_LEGAL_URL: ""
    # WEBLATE_PRIVACY_URL: ""
  errorreport: {}
    # ROLLBAR_KEY: ""
    # ROLLBAR_ENVIRONMENT: ""
    # SENTRY_DSN: ""
    # SENTRY_ENVIRONMENT: ""
  localization: {}
    # WEBLATE_LOCALIZE_CDN_URL: ""
    # WEBLATE_LOCALIZE_CDN_PATH: ""

envFrom:
  - configMapRef:
      name: weblate-env

envValueFrom:
  POSTGRES_PASSWORD:
    secretKeyRef:
      name: dbcreds
      key: postgresql-password
  POSTGRES_HOST:
    secretKeyRef:
      name: dbcreds
      key: plainhost
  REDIS_HOST:
    secretKeyRef:
      name: rediscreds
      key: plainhost
  REDIS_PASSWORD:
    secretKeyRef:
      name: rediscreds
      key: redis-password

probes:
  liveness:
    path: "/healthz"
  readiness:
    path: "/healthz"
  startup:
    path: "/healthz"

service:
  main:
    ports:
      main:
        port: 10158
        targetPort: 8080

persistence:
  config:
    enabled: true
    mountPath: "/app/data"
  cache:
    enabled: true
    type: emptyDir
    mountPath: "/app/cache"

redis:
  enabled: true
  existingSecret: "rediscreds"
  redisUsername: default

postgresql:
  enabled: true
  existingSecret: "dbcreds"
  postgresqlUsername: weblate
  postgresqlDatabase: weblate
