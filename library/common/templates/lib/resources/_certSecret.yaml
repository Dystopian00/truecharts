{{- define "common.resources.cert.secret" -}}
{{ if eq (include "common.resources.cert.available" .) "true" }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "common.names.fullname" . }}-ix-cert
  labels: {{ include "common.labels" . | nindent 4 }}
type: kubernetes.io/tls
data:
  tls.crt: {{ (include "common.resources.cert.publicKey" .) | toString | b64enc | quote }}
  tls.key: {{ (include "common.resources.cert.privateKey" .) | toString | b64enc | quote }}
{{ end }}
{{- end }}
